
<div class="clr-row">
        <div class="card" style="margin-top: 0em;">
            <div class="card-header">
                Inisiasi
            </div>
            <div class="card-block">
                <form #inisiasi id="inisiasi" clrForm>
                    <div class="clr-row">
                        <div class="clr-col-6">
                            <div class="clr-form-control">
                                <label class="clr-control-label">Nomor Inisiasi</label>
                                <div class="clr-control-container">
                                    <input [(ngModel)]="searchModel.init_no" #init_no class="clr-input" type="text" name="init_no" required placeholder="IN00005120000001" />
                                    <span class="clr-subtext">Nomor Inisiasi untuk dicari</span>
                                </div>
                            </div>
                        </div>
                        <div class="clr-col-6">
                            <clr-select-container class="clr-form-control">
                                <label class="clr-control-label">Jenis Product</label>
                                <select [(ngModel)]="searchModel.product" #product clrSelect name="product" (change)="onProductChanged()">
                                    <option value=null></option>
                                    <ng-container *ngFor="let product of products">
                                        <option value="{{product.code}}">{{product.name}}</option>
                                    </ng-container>
                                </select>
                            </clr-select-container>
                        </div>
                    </div>

                    <div class="clr-row">
                        <div class="clr-col-6">
                            <div class="clr-form-control">
                                <label class="clr-control-label">Tanggal Inisiasi</label>
                                <div class="clr-control-container">
                                    <input  [(ngModel)]="searchModel.create_date" class="clr-input" type="date" name="create_date" required />
                                    <span class="clr-subtext">Tanggal Inisiasi dilakukan</span>
                                </div>
                            </div>
                        </div>
                        <div class="clr-col-6">
                            <div class="clr-form-control">
                                <label class="clr-control-label">User Inisiasi</label>
                                <div class="clr-control-container">
                                    <input [(ngModel)]="searchModel.create_by" class="clr-input" type="text" name="create_by" placeholder="K24068" />
                                    <span class="clr-subtext">NIK dari user yang melakukan Inisiasi</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="clr-row">
                        <div class="clr-col-6">
                            <clr-select-container class="clr-form-control">
                                <label class="clr-control-label">Tipe Inisiasi</label>
                                <select (change)="onProductChanged()" [(ngModel)]="searchModel.init_type" #init_type clrSelect name="init_type">
                                    <option value=null></option>
                                    <ng-container *ngFor="let type of InitiationType">
                                        <option value="{{type.code}}">{{type.name}}</option>
                                    </ng-container>
                                </select>
                            </clr-select-container>
                        </div>
                        <div class="clr-col-6">
                            <div class="clr-form-control">
                                <label class="clr-control-label">Nomor Nota</label>
                                <div class="clr-control-container">
                                    <input [(ngModel)]="searchModel.nomor_nota" class="clr-input" type="text" name="nomor_nota" />
                                    <span class="clr-subtext">Nomor Nota pembelian (Umumnya apabila Tipe Inisiasi = 'Stock')</span>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                    <div class="clr-row">
                        <div class="clr-col-6">
                            <clr-select-container class="clr-form-control">
                                <label class="clr-control-label">Tipe Bayar</label>
                                <select [(ngModel)]="searchModel.tipe_bayar" #tipe_bayar clrSelect name="tipe_bayar">
                                    <option value=null></option>
                                    <ng-container *ngFor="let pay of PaymentType">
                                        <option value="{{pay.code}}">{{pay.name}}</option>
                                    </ng-container>
                                </select>
                            </clr-select-container>
                        </div>
                        <div class="clr-col-6">
                            <clr-select-container class="clr-form-control">
                                <label class="clr-control-label">Status Dokumen</label>
                                <select [(ngModel)]="searchModel.flag" #tipe_bayar clrSelect name="flag">
                                    <option value=null></option>
                                    <ng-container *ngFor="let stat of DocumentStatus">
                                        <option value="{{stat.code}}">{{stat.name}}</option>
                                    </ng-container>
                                </select>
                            </clr-select-container>
                        </div>
                    </div>

                    <ng-container *ngTemplateOutlet="formInput">

                    </ng-container>

                </form>
            </div>
            <div class="card-footer">
                <button class="btn btn-primary align-right" (click)="doSearch()">
                    Cari
                </button>
                <button form="inisiasi" class="btn btn-secondary" (click)="ResetSearch(inisiasi)">
                    Reset
                </button>
            </div>
        </div>
</div>

<div class="clr-row">
    <div class="card" style="margin-top: 0em;">
        <div class="card-header">
                Hasil Pencarian
        </div>
        <clr-datagrid [(clrDgSelected)]="selected">
            <clr-dg-action-bar>
                <div class="btn-group">
                    <button type="button" class="btn btn-sm btn-secondary" (click)="onAdd()"><clr-icon shape="plus"></clr-icon>Tambah</button>
                    <button type="button" class="btn btn-sm btn-secondary" (click)="onDelete()" ><clr-icon shape="close"></clr-icon> Hapus</button>
                    <button type="button" class="btn btn-sm btn-secondary" (click)="onEdit()" *ngIf="selected.length == 1"><clr-icon shape="pencil"></clr-icon>Ubah</button>
                </div>
                <div class="btn-group">
                    <clr-dropdown>
                        <button type="button" class="btn btn-sm btn-secondary" clrDropdownTrigger>
                            Export
                            <clr-icon shape="caret down"></clr-icon>
                        </button>
                        <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                            <button type="button" (click)="onExportAll()" clrDropdownItem>Export All</button>
                            <button type="button" (click)="onExportSelected()" [disabled]="selected.length === 0" clrDropdownItem>Export Selected Items</button>
                        </clr-dropdown-menu>
                    </clr-dropdown>
                </div>
            </clr-dg-action-bar>
            
            <!-- 8 Kolom -->
            <clr-dg-column>
                Nomor Inisiasi
            </clr-dg-column>
            <clr-dg-column>
                Tanggal Inisiasi
            </clr-dg-column>
            <clr-dg-column>
                User Inisiasi
            </clr-dg-column>
            <clr-dg-column>
                Tipe Inisiasi
            </clr-dg-column>
            <clr-dg-column>
                Jenis Produk
            </clr-dg-column>
            <clr-dg-column>
                Vendor
            </clr-dg-column>
            <clr-dg-column>
                Tipe Bayar
            </clr-dg-column>
            <clr-dg-column>
                Total Berat
            </clr-dg-column>
            <clr-dg-column>
                Total Quantity
            </clr-dg-column>

            <clr-dg-row *clrDgItems="let data of datas" [clrDgItem]="data">
                <clr-dg-cell>{{data.init_no}}</clr-dg-cell>
                <clr-dg-cell>{{data.create_date + " " + data.create_time}}</clr-dg-cell>
                <clr-dg-cell>{{data.create_by}}</clr-dg-cell>
                <clr-dg-cell>{{data.init_type.name}}</clr-dg-cell>
                <clr-dg-cell>{{data.product.name}}</clr-dg-cell>
                <clr-dg-cell>{{data.vendor.name}}</clr-dg-cell>
                <clr-dg-cell>{{data.tipe_bayar}}</clr-dg-cell>
                <clr-dg-cell>{{data.total_berat.toString()}}</clr-dg-cell>
                <clr-dg-cell>{{data.total_quantity}}</clr-dg-cell>
            </clr-dg-row>

            <clr-dg-footer>
                {{datas.length}} data
            </clr-dg-footer>
        </clr-datagrid>
    </div>
</div>


<ng-template #Perhiasan>
    <div class="card">
        <div class="card-header">
            Atribut Perhiasan
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container>
                        <label class="clr-control-label" style="padding-left: 10px">Kadar</label>
                        <select [(ngModel)]="searchModel.kadar" #jenis clrSelect name="kadar">
                            <ng-container *ngFor="let kadar of kadars">
                                <option value="{{kadar.code}}">{{kadar.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container>
                        <label class="clr-control-label" style="padding-left: 10px">Warna</label>
                        <select [(ngModel)]="searchModel.warna" #jenis clrSelect name="warna">
                            <ng-container *ngFor="let warna of warnas">
                                <option value="{{warna.code}}">{{warna.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container>
                            <label class="clr-control-label" style="padding-left: 10px">Jenis</label>
                            <select [(ngModel)]="searchModel.jenis" #jenis clrSelect name="jenis">
                                <ng-container *ngFor="let jenis of jeniss">
                                    <option value="{{jenis.code}}">{{jenis.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Berat</label>
                        <div class="clr-control-container">
                            <input [(ngModel)]="searchModel.berat" class="clr-input" type="text" name="berat" placeholder="00.51" />
                            <span class="clr-subtext">Harap gunakan titik (.)</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #Mulia>
    
    <div class="card">
        <div class="card-header">
            Atribut Mulia
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Seri</label>
                        <select [(ngModel)]="searchModel.seri" #seri clrSelect name="seri">
                            <ng-container *ngFor="let seri of series">
                                <option value="{{seri.code}}">{{seri.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Denom</label>
                        <select [(ngModel)]="searchModel.denom" #denom clrSelect name="denom">
                            <ng-container *ngFor="let denom of denoms">
                                <option value="{{denom.code}}">{{denom.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #Gift>
    
    <div class="card">
        <div class="card-header">
            Atribut Gift
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Seri</label>
                        <select [(ngModel)]="searchModel.seri" #seri clrSelect name="seri">
                            <ng-container *ngFor="let seri of series">
                                <option value="{{seri.code}}">{{seri.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Denom</label>
                        <select [(ngModel)]="searchModel.denom" #denom clrSelect name="denom">
                            <ng-container *ngFor="let denom of denoms">
                                <option value="{{denom.code}}">{{denom.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #Souvenir>
    
    <div class="card">
        <div class="card-header">
            Atribut Souvenir
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Seri</label>
                        <select [(ngModel)]="searchModel.seri" #seri clrSelect name="seri">
                            <ng-container *ngFor="let seri of series">
                                <option value="{{seri.code}}">{{seri.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Denom</label>
                        <select [(ngModel)]="searchModel.denom" #denom clrSelect name="denom">
                            <ng-container *ngFor="let denom of denoms">
                                <option value="{{denom.code}}">{{denom.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #Dinar>
    
    <div class="card">
        <div class="card-header">
            Atribut Dinar
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Seri</label>
                        <select [(ngModel)]="searchModel.seri" #seri clrSelect name="seri">
                            <ng-container *ngFor="let seri of series">
                                <option value="{{seri.code}}">{{seri.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Denom</label>
                        <select [(ngModel)]="searchModel.denom" #denom clrSelect name="denom">
                            <ng-container *ngFor="let denom of denoms">
                                <option value="{{denom.code}}">{{denom.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #Berlian>
    <div class="card">
        <div class="card-header">
            Atribut Berlian
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Kadar</label>
                        <select [(ngModel)]="searchModel.kadar" #jenis clrSelect name="kadar">
                            <ng-container *ngFor="let kadar of kadars">
                                <option value="{{kadar.code}}">{{kadar.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Warna</label>
                        <select [(ngModel)]="searchModel.warna" #jenis clrSelect name="warna">
                            <ng-container *ngFor="let warna of warnas">
                                <option value="{{warna.code}}">{{warna.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Jenis</label>
                            <select [(ngModel)]="searchModel.jenis" #jenis clrSelect name="jenis">
                                <ng-container *ngFor="let jenis of jeniss">
                                    <option value="{{jenis.code}}">{{jenis.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Berat</label>
                        <div class="clr-control-container">
                            <input [(ngModel)]="searchModel.berat" class="clr-input" type="text" name="berat" placeholder="00.51" />
                            <span class="clr-subtext">Harap gunakan titik (.)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Cut</label>
                            <select [(ngModel)]="searchModel.cut" #cut clrSelect name="cut">
                                <ng-container *ngFor="let cut of cuts">
                                    <option value="{{cut.code}}">{{cut.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Color</label>
                            <select [(ngModel)]="searchModel.color" #color clrSelect name="color">
                                <ng-container *ngFor="let color of colors">
                                    <option value="{{color.code}}">{{color.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                    </div>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Clarity</label>
                            <select [(ngModel)]="searchModel.clarity" #clarity clrSelect name="clarity">
                                <ng-container *ngFor="let clarity of claritys">
                                    <option value="{{clarity.code}}">{{clarity.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Carat</label>
                        <div class="clr-control-container">
                            <input [(ngModel)]="searchModel.carat" class="clr-input" type="text" name="carat" placeholder="0.515" />
                            <span class="clr-subtext">Harap gunakan titik (.)</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #Adiratna>
    <div class="card">
        <div class="card-header">
            Atribut Adiratna
        </div>
        <div class="card-body">
            <div class="clr-row">
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Kadar</label>
                        <select [(ngModel)]="searchModel.kadar" #jenis clrSelect name="kadar">
                            <ng-container *ngFor="let kadar of kadars">
                                <option value="{{kadar.code}}">{{kadar.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <clr-select-container class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Warna</label>
                        <select [(ngModel)]="searchModel.warna" #jenis clrSelect name="warna">
                            <ng-container *ngFor="let warna of warnas">
                                <option value="{{warna.code}}">{{warna.name}}</option>
                            </ng-container>
                        </select>
                    </clr-select-container>
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Jenis</label>
                            <select [(ngModel)]="searchModel.jenis" #jenis clrSelect name="jenis">
                                <ng-container *ngFor="let jenis of jeniss">
                                    <option value="{{jenis.code}}">{{jenis.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Berat</label>
                        <div class="clr-control-container">
                            <input [(ngModel)]="searchModel.berat" class="clr-input" type="text" name="berat" placeholder="00.51" />
                            <span class="clr-subtext">Harap gunakan titik (.)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Cut</label>
                            <select [(ngModel)]="searchModel.cut" #cut clrSelect name="cut">
                                <ng-container *ngFor="let cut of cuts">
                                    <option value="{{cut.code}}">{{cut.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Color</label>
                            <select [(ngModel)]="searchModel.color" #color clrSelect name="color">
                                <ng-container *ngFor="let color of colors">
                                    <option value="{{color.code}}">{{color.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                    </div>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-6">
                        <clr-select-container class="clr-form-control">
                            <label class="clr-control-label" style="padding-left: 10px">Clarity</label>
                            <select [(ngModel)]="searchModel.clarity" #clarity clrSelect name="clarity">
                                <ng-container *ngFor="let clarity of claritys">
                                    <option value="{{clarity.code}}">{{clarity.name}}</option>
                                </ng-container>
                            </select>
                        </clr-select-container>
                </div>
                <div class="clr-col-6">
                    <div class="clr-form-control">
                        <label class="clr-control-label" style="padding-left: 10px">Carat</label>
                        <div class="clr-control-container">
                            <input [(ngModel)]="searchModel.carat" class="clr-input" type="text" name="carat" placeholder="0.515" />
                            <span class="clr-subtext">Harap gunakan titik (.)</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
            <div class="clr-row">
                <div class="clr-col-12">
                    &nbsp;&nbsp;                
                    <!-- Sengaja buat space -->
                </div>
            </div>
        </div>
    </div>
</ng-template>

<clr-modal [(clrModalOpen)]="modalOpen" [clrModalStaticBackdrop]="false">
    <h3 class="modal-title">{{errorTitle}}</h3>
    <div class="modal-body">
        <p *ngIf="errorType == ErrorType.ERROR" style="color: red">{{errorMessage}}</p>
        <p *ngIf="errorType == ErrorType.WARN" style="color: yellow">{{errorMessage}}</p>
        <p *ngIf="errorType == ErrorType.NORMAL">{{errorMessage}}</p>
    </div>
</clr-modal>
